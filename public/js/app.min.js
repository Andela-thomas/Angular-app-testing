(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function() {
  // Controller, services, directives and filters declaration
  angular.module('test.controllers', []);
  angular.module('test.services', []);
  angular.module('test.directives', []);
  angular.module('test.filters', []);

  // require services
  require('./services/users');


  // require controllers
  require('./controllers/header');
  require('./controllers/profile');
  require('./controllers/home');

  // require filters

  // require directives

  //Intiliaze angular app
  window.app = angular.module('test', [
    'test.controllers',
    'test.services',
    'test.directives',
    'test.filters',
    'ngRoute',
    'ui.router',
    'ngResource'
  ]);

  // On run
  window.app.run(['$rootScope', function($rootScope) {
    $rootScope.data = {
      title: 'Angular | Testine'
    };
  }]);


  // $urlMatcherFactoryProvider, $stateProvider, $urlRouterProvider, $locationProvider

  window.app.config(['$urlMatcherFactoryProvider', '$stateProvider', '$urlRouterProvider', '$locationProvider',
    function($urlMatcherFactory, $stateProvider, $urlRouterProvider, $locationProvider) {
      // if the url is not macthed
      $urlRouterProvider.otherwise('/');
      // make the ui.router case insensitive
      //$urlMatcherFactory.caseInsensitive(true);
      // Define your app states
      // .$stateProvider.state(@statename,{@url, @controller, @templateUrl})
      $stateProvider
        .state('home', {
          url: '/',
          controller: 'HomeCtrl',
          templateUrl: 'views/home.html'
        })
        .state('profile', {
          url: '/profile/{id}/view',
          controller: 'ProfileCtrl',
          templateUrl: 'views/view.html'
        })
        .state('404', {
          url: '/404',
          templateUrl: 'views/404.html'
        });
      // Trim the #! from the url
      //$locationProvider.html5Mode(true);
    }
  ]);
})();

},{"./controllers/header":2,"./controllers/home":3,"./controllers/profile":4,"./services/users":5}],2:[function(require,module,exports){
angular.module('test.controllers', [])
  .controller('HeaderCtrl', ['$scope', function($scope) {
    $scope.menu = [{
      state: 'home',
      name: 'Home'
    }, {
      state: 'about',
      name: 'About'
    }, {
      state: 'contact',
      name: 'Contact us'
    }];
  }]);

},{}],3:[function(require,module,exports){
angular.module('test.controllers')
  .controller('HomeCtrl', ['$scope', 'Users', function($scope, Users) {
    Users.query(function(err, users) {
      if (err) {
        Materialize.toast('Failed to fetct users', 5000);
      } else {
        $scope.users = users;
      }
    });
  }]);

},{}],4:[function(require,module,exports){
angular.module('test.controllers')
  .controller('ProfileCtrl', ['$scope', '$stateParams', 'Users', function($scope, $stateParams, Users) {
    $scope.profile_img = 'http://lorempixel.com/400/400/people';
    if ($stateParams.id) {
      Users.get({
        id: $stateParams.id
      }, function(err, res) {
        if (err) {
          Materialize.toast('failed to fetch user', 5000);
        } else {
          $scope.user = res;
        }
      });
    }
  }]);

},{}],5:[function(require,module,exports){
angular.module('test.services', [])
  .service('Users', ['$http', function($http) {
    return {
      query: function(cb) {
        $http.get('http://jsonplaceholder.typicode.com/users')
          .success(function(res) {
            cb(null, res);
          })
          .error(function(err) {
            cb(err);
          });
      },
      get: function(user, cb) {
        $http.get('http://jsonplaceholder.typicode.com/users/' + user.id)
          .success(function(res) {
            cb(null, res);
          })
          .error(function(err) {
            cb(err);
          });
      }
    };
  }]);

},{}]},{},[1]);
